{%- if settings.newsletter_system == 'by_shopify_form' -%}
{%- assign formId = 'Contact_' | append: section.id -%}
{%- form 'customer', id: formId -%}
{%- if form.posted_successfully? -%}
<p class="form-message form-message--success form-success">{{ 'general.newsletter_form.confirmation'| t }} <button class="success-form-close-btn">X</button></p>
<script>
  var SuccessFormToggle = $('.success-form-close-btn');
  SuccessFormToggle.on('click', function(){
    $('.form-message--success').slideToggle();
  })
</script>
{%- else -%}

{%- if settings.newsletter_style_handle == 'newsletter_style_1' -%}
<div id="one-time-newsletter" class="popup_wrapper">
  <div class="newsletter_popup_inner">
    <span class="popup_off"><i class="fa fa-times-circle"></i></span>
    <div class="subscribe_area">
      <h2 class="">{{ settings.newletter_popup_title }}</h2>
      <p class="">{{ settings.newsletter_text }}</p>
      <div class="form-group subscribe-form-group">
        {%- if form.errors -%}
        <div class="form-message form-message--error">
          {{ form.errors | default_errors }}
        </div>
        {%- endif -%}
        <div class="">
          <input type="hidden" name="contact[tags]" value="newsletter">
          <input class="form-control subscribe-form-input" type="email" name="contact[email]" id="Email" value="{% if customer %}{{ customer.email }}{% endif %}"
                 placeholder="{{ 'general.newsletter_form.newsletter_email'| t }}" aria-label="{{ 'general.newsletter_form.newsletter_email'| t }}" {% if form.errors %}aria-invalid="true"{% endif %} autocorrect="off" autocapitalize="off">
          <button type="submit" class="newsletter-btn" name="commit" id="Subscribe">{{ settings.newsletter_button_name }}</button>
          {%- if settings.dont_show_again_enable -%}
          <p><input id="forgetMe" type="checkbox" name="forgetMe">{{ settings.dont_show_again_text }}</p>
          {%- endif -%}
        </div>
      </div>
    </div>
  </div>			
</div>
{%- elsif settings.newsletter_style_handle == 'newsletter_style_2' -%}
<div id="one-time-newsletter" class="popup_wrapper">
  <div class="newsletter_popup_inner">
    <span class="popup_off"><i class="fa fa-times-circle"></i></span>
    <div class="subscribe_area area-2">
      <div class="subscribe-image">
        {% if settings.newsletter_bg_img %}
        <img src="{{ settings.newsletter_bg_img | img_url: '340x400', crop: 'center' }}">
        {% else %}
        <img src="https://via.placeholder.com/340x400">
        {% endif %}
      </div>
      <div class="subscribe-content">
        <h2 class="">{{ settings.newletter_popup_title }}</h2>
        <p class="">{{ settings.newsletter_text }}</p>
        <div class="form-group subscribe-form-group">
          {%- if form.errors -%}
          <div class="form-message form-message--error">
            {{ form.errors | default_errors }}
          </div>
          {%- endif -%}
          <div class="">
            <input type="hidden" name="contact[tags]" value="newsletter">
            <input class="form-control subscribe-form-input" type="email" name="contact[email]" id="Email" value="{% if customer %}{{ customer.email }}{% endif %}"
                   placeholder="{{ 'general.newsletter_form.newsletter_email'| t }}" aria-label="{{ 'general.newsletter_form.newsletter_email'| t }}" {% if form.errors %}aria-invalid="true"{% endif %} autocorrect="off" autocapitalize="off">
            <button type="submit" class="newsletter-btn" name="commit" id="Subscribe">{{ settings.newsletter_button_name }}</button>
            {%- if settings.dont_show_again_enable -%}
            <p><input id="forgetMe" type="checkbox" name="forgetMe"> {{ settings.dont_show_again_text }}</p>
            {%- endif -%}
          </div>
        </div>
      </div>
    </div>
  </div>			
</div>
{%- elsif settings.newsletter_style_handle == 'newsletter_style_3' -%}

<!-- Home Popup Section -->
<div id="one-time-newsletter" class="fade subscribe_popup popup_wrapper">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body">
        <button type="button" class="close popup_off">
          <span aria-hidden="true"><i class="ion-ios-close-empty"></i></span>
        </button>
        <div class="row no-gutters">
          <div class="col-sm-5">
            {% if settings.newsletter_bg_img %}
            <div class="background_bg h-100">
              <img src="{{ settings.newsletter_bg_img | img_url: '340x400', crop: 'center' }}">
            </div>
            {% else %}
            <img src="https://via.placeholder.com/340x400">
            {% endif %}
          </div>
          <div class="col-sm-7">
            <div class="popup_content">
              <div class="popup-text">
                <div class="heading_s1">
                  <h4>{{ settings.newletter_popup_title }}</h4>
                </div>
                <p>{{ settings.newsletter_text }}</p>
              </div>
              {%- if form.errors -%}
              <div class="form-message form-message--error">
                {{ form.errors | default_errors }}
              </div>
              {%- endif -%}
              <div class="">
                <div class="form-group">
                  <input type="hidden" name="contact[tags]" value="newsletter">
                  <input class="form-control rounded-0" type="email" name="contact[email]" id="Email" value="{% if customer %}{{ customer.email }}{% endif %}"
                         placeholder="{{ 'general.newsletter_form.newsletter_email'| t }}" aria-label="{{ 'general.newsletter_form.newsletter_email'| t }}" {% if form.errors %}aria-invalid="true"{% endif %} autocorrect="off" autocapitalize="off">
                </div>

                <div class="form-group">
                  <button class="btn btn-fill-line btn-block text-uppercase rounded-0" title="Subscribe" type="submit" name="commit" id="Subscribe">{{ settings.newsletter_button_name }}</button>
                </div>

                {%- if settings.dont_show_again_enable -%}
                <div class="chek-form">
                  <div class="custome-checkbox">
                    <input class="form-check-input" type="checkbox" name="forgetMe" id="forgetMe" value="">
                    <label class="form-check-label" for="forgetMe"><span>{{ settings.dont_show_again_text }}</span></label>
                  </div>
                </div>
                {%- endif -%}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- End Screen Load Popup Section --> 

{%- endif -%}
{%- endif -%}
{%- endform -%}

{%- elsif settings.newsletter_system == 'by_mailchimp' -%}

{%- if settings.newsletter_style_handle == 'newsletter_style_1' -%}
<div id="one-time-newsletter" class="popup_wrapper">
  <div class="newsletter_popup_inner">
    <span class="popup_off"><i class="fa fa-times-circle"></i></span>
    <div class="subscribe_area">
      <h2 class="">{{ settings.newletter_popup_title }}</h2>
      <p class="">{{ settings.newsletter_text }}</p>
      <div class="form-group subscribe-form-group">
        <form {% if settings.newsletter_action != '' %}action="{{ settings.newsletter_action }}"{% else %}action="#"{% endif %} method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank">
          <input type="email" class="form-control subscribe-form-input" id="mail" value="{% if customer %}{{ customer.email }}{% endif %}" name="EMAIL" placeholder="{{ 'general.newsletter_form.newsletter_email'| t }}">
          <button type="submit" class="newsletter-btn" id="subscribe">{{ settings.newsletter_button_name }}</button>
          {%- if settings.dont_show_again_enable -%}
          <p><input id="forgetMe" type="checkbox" name="forgetMe"> {{ settings.dont_show_again_text }}</p>
          {%- endif -%}
        </form>
      </div>
    </div>
  </div>			
</div>
{%- elsif settings.newsletter_style_handle == 'newsletter_style_2' -%}
<div id="one-time-newsletter" class="popup_wrapper">
  <div class="newsletter_popup_inner">
    <span class="popup_off"><i class="fa fa-times-circle"></i></span>
    <div class="subscribe_area area-2">
      <div class="subscribe-image">
        {% if settings.newsletter_bg_img %}
        <img src="{{ settings.newsletter_bg_img | img_url: '440x550', crop: 'center' }}">
        {% else %}
        <img src="https://via.placeholder.com/440x550">
        {% endif %}
      </div>
      <div class="subscribe-content">
        <h2 class="">{{ settings.newletter_popup_title }}</h2>
        <p class="">{{ settings.newsletter_text }}</p>
        <div class="form-group subscribe-form-group">   
          <form {% if settings.newsletter_action != '' %}action="{{ settings.newsletter_action }}"{% else %}action="#"{% endif %} method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank">
            <input type="email" class="form-control subscribe-form-input" id="mail" value="{% if customer %}{{ customer.email }}{% endif %}" name="EMAIL" placeholder="{{ 'general.newsletter_form.newsletter_email'| t }}">
            <button type="submit" class="newsletter-btn" id="subscribe">{{ settings.newsletter_button_name }}</button>
            {%- if settings.dont_show_again_enable -%}
            <p><input id="forgetMe" type="checkbox" name="forgetMe"> {{ settings.dont_show_again_text }}</p>
            {%- endif -%}
          </form>
        </div>
      </div>
    </div>
  </div>			
</div>

{%- elsif settings.newsletter_style_handle == 'newsletter_style_3' -%}

<!-- Home Popup Section -->
<div class="fade subscribe_popup popup_wrapper" id="one-time-newsletter">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body">
        <button type="button" class="close popup_off">
          <span aria-hidden="true"><i class="ion-ios-close-empty"></i></span>
        </button>
        <div class="row no-gutters">
          <div class="col-sm-5">
            {% if settings.newsletter_bg_img %}
            <div class="background_bg h-100" data-img-src="{{ settings.newsletter_bg_img | img_url: '340x400', crop: 'center' }}"></div>
            {% else %}
            <img src="https://via.placeholder.com/340x400">
            {% endif %}
          </div>
          <div class="col-sm-7">
            <div class="popup_content">
              <div class="popup-text">
                <div class="heading_s1">
                  <h4>{{ settings.newletter_popup_title }}</h4>
                </div>
                <p>{{ settings.newsletter_text }}</p>
              </div>
              <form {% if settings.newsletter_action != '' %}action="{{ settings.newsletter_action }}"{% else %}action="#"{% endif %} method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank">
                <input type="email" class="form-control rounded-0 subscribe-form-input" id="mail" value="{% if customer %}{{ customer.email }}{% endif %}" name="EMAIL" placeholder="{{ 'general.newsletter_form.newsletter_email'| t }}">
                <button type="submit" class="newsletter-btn" id="subscribe">{{ settings.newsletter_button_name }}</button>
              </form>
              {%- if settings.dont_show_again_enable -%}
              <div class="chek-form">
                <div class="custome-checkbox">
                  <input class="form-check-input" type="checkbox" name="forgetMe" id="forgetMe" value="">
                  <label class="form-check-label" for="forgetMe"><span>{{ settings.dont_show_again_text }}</span></label>
                </div>
              </div>
              {%- endif -%}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- End Screen Load Popup Section --> 

{%- endif -%}
{%- endif -%}





{%- if settings.one_day_popup_enable -%}
{{ 'newsletter-js.js' | asset_url | script_tag | remove: ' type="text/javascript"' }}
<script>
  $(function () {
    $('#one-time-newsletter').firstVisitPopup({
      cookieName : 'index'
    });
  });
</script>
{%- else -%}
<script>
  setTimeout(function() {
    $('.popup_wrapper').css({"opacity": "1", "visibility": "visible"});
    $('.popup_off').click(function(){
      $(".popup_wrapper").fadeOut(200);
    })
  }, 5000);	 
</script>
{%- endif -%}
{%- if settings.dont_show_again_enable -%}
<script>
  if(localStorage.getItem("DontShow")) {
    $("#one-time-newsletter").hide();
  }
  $("#forgetMe").on("click", function() {
    localStorage.setItem("DontShow", "true");
  });
</script>
{%- endif -%}